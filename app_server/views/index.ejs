<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 100%; }
      #drop_down{
        height:100px;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>

  </head>
  <body>
    <div id=drop_down>
        <select name="type" id="type">
        </select>
        <select name="description" id="description"></select>
        <button></button>
    </div>

    <div id="map"></div>
    <script type="text/javascript">

    var lats=[];
    var longs=[];
    var map;

    $(document).ready(function(){
      var arr = [];
      var arrSec = [];
      console.log('jquery is ready');

      $.ajax({
        url:'https://data.cityofchicago.org/resource/ijzp-q8t2.json',
        type:'get',
        success:function(data){

          console.dir(data);
           $(':selected').on('change',function(){
             console.log('option has changed');
           });
          for(var crime in data){
            if(arr.indexOf(data[crime].primary_type) == -1){
              arr.push(data[crime].primary_type);
              console.log('new type!', data[crime].primary_type);
              $('#type').append('<option id="'+data[crime].primary_type+'" value="'+data[crime].primary_type+'">'+data[crime].primary_type+'</option>');
            }//end of if statment

             if(data[crime].primary_type==$('option:selected').val()){

              var marker = new google.maps.Marker({
                position: {lat:parseFloat(data[crime].latitude),lng:parseFloat(data[crime].longitude)},
                map: map,
                icon:'http://megaicons.net/static/img/icons_sizes/15/534/32/map-marker-ball-left-pink-icon.png',
                title: data[crime].primary_type+' ---- '+data[crime].description+' ---- '+data[crime].date,
                animation:google.maps.Animation.DROP
              });// end of marker constructor
            };//end of if statment
          }//end of for-loop

          $('select').change(function(){
            console.log($('option:selected').val());
            console.log('yay!');
          });//option:selected .change event listener
        },
        error:function(err){
          console.log(err);
        }
      });//end of ajax call
    });//end of document.ready

///////////function definitions//////////////////////

function redrawMap(){
  $.ajax({
    url:'https://data.cityofchicago.org/resource/ijzp-q8t2.json',
    type:'get',
    success:function(data){
      google.maps.event.trigger(map, 'resize');
    },
    error:function(err){
      console.log(err);
    }
  });//end of $.ajax

}//end of draw map function

function initMap() {
  var myLatLng = {lat: 41.845652363, lng: -87.636561415};

   map = new google.maps.Map(document.getElementById('map'), {
    zoom: 10,
    center: myLatLng
  });
}//end of initMap function

function drop() {
  for (var i =0; i < markerArray.length; i++) {
    setTimeout(function() {
      addMarkerMethod();
    }, i * 200);//end of set timeout
  }//end of for-loop
}//end of drop function

    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCg6XUTd5Bh0CNhz8vyaEjeTUSaVckCZ5A&callback=initMap">
    </script>
  </body>
</html>
